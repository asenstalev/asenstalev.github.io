<!DOCTYPE html>
<html>
	<body>
		<h1>
			MY OWN PAGE FOR TEST FRONTEND EMBEDDING FOR MA MESSAGING
		</h1>
		<!--script type='text/javascript'>
			function initEmbeddedMessaging() {
			  try {
				// Get configuration from parent window
				var config = window.chatConfig || {};
		
				embeddedservice_bootstrap.settings.language = 'de';
		
				window.addEventListener("onEmbeddedMessagingWindowMaximized", () => {
				  window.parent.window.isLiveChatOpened = true;
		
				  window.parent.postMessage({
					frameHeight: 480,
					frameWidth: 320
				  }, '*');
		
				  console.log('MAXIMIZED');
				});
		
				window.addEventListener("onEmbeddedMessagingWindowMinimized", () => {
				  window.parent.window.isLiveChatOpened = false;
		
				  window.parent.postMessage({
					frameHeight: 40,
					frameWidth: 40
				  }, '*');
		
				  console.log('MINIMIZED');
				});
		
				window.addEventListener("onEmbeddedMessagingWindowClosed", () => {
				  window.parent.window.isLiveChatOpened = false;
		
				  window.parent.postMessage({
					frameHeight: 40,
					frameWidth: 40
				  }, '*');
		
				  console.log('CLOSED');
				});
		
		
				embeddedservice_bootstrap.init(
				  config.orgId,
				  config.eswConfigDevName,
				  config.baseURL,
				  {
					scrt2URL: config.scrt2URL
				  }
				);
			  } catch (err) {
				console.error('Error loading Embedded Messaging: ', err);
			  }
			};
		  </script>
		  <script type='text/javascript'>
			// Function to load the bootstrap script dynamically
			function loadBootstrapScript() {
			  var config = window.chatConfig || {};
			  var bootstrapScriptSrc = config.bootstrapMinJsURL;
		
			  var script = document.createElement('script');
			  script.type = 'text/javascript';
			  script.src = bootstrapScriptSrc;
			  script.onload = initEmbeddedMessaging;
			  document.body.appendChild(script);
			}
		
			// Check if chatConfig is already available
			if (window.chatConfig) {
			  loadBootstrapScript();
			} else {
			  // Wait a short time for chatConfig to be set by parent window
			  setTimeout(function() {
				loadBootstrapScript();
			  }, 500);
			}
		</script>
		<script type='text/javascript' src='https://de-crm--testde.sandbox.my.site.com/ESWCBMessagingChannel1752764676619/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script-->

		<script type='text/javascript'>
			function initEmbeddedMessaging() {
				try {
	
					// faked chatConfig
					window.chatConfig = {
						orgId: '00D3N000000HSap', 
						eswConfigDevName: 'CB_mA_Messaging_Deployment', 
						baseURL: 'https://de-crm--testde.sandbox.my.site.com/ESWCBMessagingChannel1752764676619', 
						scrt2URL: 'https://de-crm--testde.sandbox.my.salesforce-scrt.com', 
						bootstrapMinJsURL: 'https://de-crm--testde.sandbox.my.site.com/ESWCBMessagingChannel1752764676619/assets/js/bootstrap.min.js'
					};
	
					// get configuration from parent window
					var config = window.chatConfig || {};
	
					// language
					embeddedservice_bootstrap.settings.language = 'de';
	
					// initialization
					embeddedservice_bootstrap.init(
						config.orgId,
						config.eswConfigDevName,
						config.baseURL,
						{
							scrt2URL: config.scrt2URL
						}
					);
	
					// event listener for chat maximization
					window.addEventListener("onEmbeddedMessagingWindowMaximized", () => {
				  		window.parent.window.isLiveChatOpened = true;
		
					  	window.parent.postMessage({
							frameHeight: 480,
							frameWidth: 320
					  	}, '*');
		
				  		console.log('CHAT MAXIMIZED');
					});
	
					// event listener for chat minimization
					window.addEventListener("onEmbeddedMessagingWindowMinimized", () => {
					  	window.parent.window.isLiveChatOpened = false;
			
					  	window.parent.postMessage({
							frameHeight: 40,
							frameWidth: 40
					  	}, '*');
			
					  	console.log('CHAT MINIMIZED');
					});
	
					// event listener for chat closing
					window.addEventListener("onEmbeddedMessagingWindowClosed", () => {
					  	window.parent.window.isLiveChatOpened = false;
			
					  	window.parent.postMessage({
							frameHeight: 40,
							frameWidth: 40
					  	}, '*');
			
					  	console.log('CHAT CLOSED');
					});
					
				} catch (err) {
					console.error('Error loading Embedded Messaging: ', err);
				}
			};
		</script>
		<!--script type='text/javascript'>
			// Function to load the bootstrap script dynamically
			function loadBootstrapScript() {
				var config = window.chatConfig || {};
				var bootstrapScriptSrc = 'https://de-crm--testde.sandbox.my.site.com/ESWCBMessagingChannel1752764676619/assets/js/bootstrap.min.js';

				var script = document.createElement('script');
				script.type = 'text/javascript';
				script.src = bootstrapScriptSrc;
				script.onload = initEmbeddedMessaging;
				document.body.appendChild(script);
			}

			// Check if chatConfig is already available
			if (window.chatConfig) {
				loadBootstrapScript();
			} else {
				// Wait a short time for chatConfig to be set by parent window
				setTimeout(function() {
					loadBootstrapScript();
				}, 500);
			}
	</script-->
		<script type='text/javascript' src='https://de-crm--testde.sandbox.my.site.com/ESWCBMessagingChannel1752764676619/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
	</body>
</html>
